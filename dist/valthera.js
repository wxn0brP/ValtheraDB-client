class T{db;collection;constructor(f,$){this.db=f,this.collection=$}async add(f,$=!0){return await this.db.add(this.collection,f,$)}async find(f={},$={},S={},A={}){return await this.db.find(this.collection,f,$,S,A)}async findOne(f={},$={},S={}){return await this.db.findOne(this.collection,f,$,S)}async update(f,$,S={}){return await this.db.update(this.collection,f,$,S)}async updateOne(f,$,S={}){return await this.db.updateOne(this.collection,f,$,S)}async remove(f,$={}){return await this.db.remove(this.collection,f,$)}async removeOne(f,$={}){return await this.db.removeOne(this.collection,f,$)}async updateOneOrAdd(f,$,{add_arg:S={},context:A={},id_gen:E=!0}={}){return await this.db.updateOneOrAdd(this.collection,f,$,{add_arg:S,context:A,id_gen:E})}async toggleOne(f,$={},S={}){return await this.db.toggleOne(this.collection,f,$,S)}}function H(f){let $=[];function S(E){return typeof E==="function"?E.toString():E}function A(E,F=""){Object.keys(E).forEach((K)=>{let z=E[K],P=F?`${F}.${K.replace(/\./g,"[dot]")}`:K;if(typeof z==="function")$.push(P),E[K]=S(z);else if(Array.isArray(z))z.forEach((q,v)=>{if(typeof q==="function")$.push(`${P}[${v}]`),z[v]=S(q)});else if(typeof z==="object"&&z!==null)A(z,P)})}return A(f),{data:f,keys:$}}var B=H;var D="0.0.1";class G{remote;version=D;constructor(f){if(typeof f==="string"){let $=new URL(f),S=$.username,A=$.password;if(!S||!A)throw Error("Invalid remote database");$.username="",$.password="";let E=$.toString().slice(0,-1);this.remote={name:S,url:E,auth:A}}else this.remote=f;if(this.remote.url.endsWith("/"))this.remote.url=this.remote.url.slice(0,-1)}async _request(f,$=[]){let S=B($),A={db:this.remote.name,params:S.data,keys:S.keys},E=this.remote.url+"/db/"+f,F=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.remote.auth},body:JSON.stringify(A)}).then((K)=>K.json());if(F.err)throw Error(F.msg);return F.result}c(f){return new T(this,f)}async getCollections(){return await this._request("getCollections",[])}async ensureCollection(f){return await this._request("ensureCollection",[f])}async issetCollection(f){return await this._request("issetCollection",[f])}async add(f,$,S=!0){return await this._request("add",[f,$,S])}async find(f,$,S={},A={},E={}){return await this._request("find",[f,$,S,A,E])}async findOne(f,$,S={},A={}){return await this._request("findOne",[f,$,S,A])}async update(f,$,S,A={}){return await this._request("update",[f,$,S,A])}async updateOne(f,$,S,A={}){return await this._request("updateOne",[f,$,S,A])}async remove(f,$,S={}){return await this._request("remove",[f,$,S])}async removeOne(f,$,S={}){return await this._request("removeOne",[f,$,S])}async updateOneOrAdd(f,$,S,A){return await this._request("updateOneOrAdd",[f,$,S,A])}async toggleOne(f,$,S,A){return await this._request("toggleOne",[f,$,S,A])}async removeCollection(f){return await this._request("removeCollection",[f])}}var Y=G;export{Y as default,G as ValtheraRemote};

//# debugId=6D0E6EE44172AC0D64756E2164756E21
//# sourceMappingURL=valthera.js.map
